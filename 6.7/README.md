# Домашнее задание к занятию "PLC Овен"

### Цель задания
ПЛК фирмы "ОВЕН" является одним из ведущих отечественных производителей компонентов для АСУТП. Данный ПЛК по частоте использования уступает разве что PLC Siemens.
После выполнения данного домашнего задания вы сможете:
1. Разобраться в разнообразии контроллеров ОВЕН.
2. Изучите основы программирования данного ПЛК, его особенности и нюансы.
3. Настроите связь ПЛК/HMI со SCADA-системой, установленной на виртуальной машине.


### Чеклист готовности к домашнему заданию
1. Загрузить и установите дистрибутив ПО Codesys V3 с [официального сайта производителя](https://owen.ru/license-file?f=https://www.owen.ru/upl/PO/Codesys3/CODESYS_Repository_Archive_V3.5_SP4.zip).
2. Загрузить и установить [дополнительные библиотеки](https://owen.ru/product/codesys_v3/documentation), необходимые для выполнения задания. Список необходимых библиотек: 
3. Скачать [предварительно разработанный HMI-проект]().
4. Скачать экспортированный образ ОС Windows 10 с [официального сайта](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/).
5. Загрузить один из выбранных вами OPC-серверов: [MasterOPC Universal Modbus Server](https://insat.ru/products/?category=1414), [Lectus Modbus OPC/DDE Server](https://lectussoft.com/), [ОВЕН OPC](https://owen.ru/product/new_opc_server/documentation_and_software) или произведите настройку CODESYS V3 OPC с помощью программы CODESYS V3. Инструкция по установке,настройке, а также сравнительная характеристика OPC-серверов находится в [этой инструкции](https://docs.google.com/presentation/d/1-7_woClUMEdqsapWk7zwnPTtoz-if-MFRQWfNECYolQ/edit?usp=sharing).
6. Установить [MasterSCADA](https://insat.ru/products/?category=1631) на виртуальную машину. Для этого воспользуйтесь [инструкцией по установке](https://docs.google.com/presentation/d/1DX7VS4FKkJgiwB3IvRgMKM29eHPnuVxqZNXGL99QxdQ/edit?usp=sharing).
7. Установить [OWEN Logic](https://owen.ru/product/programmnoe_obespechenie_owen_logic).

### Инструкция к заданию
1. Выполните установку необходимых программных инструментов из **Чеклиста готовности к домашнему заданию**.
2. Сделайте копию Шаблона для домашнего задания себе на Google Disk.
3. В названии файла введите вашу фамилию и имя.
4. Зайдите в «Настройки доступа» скопированного вами шаблона и выберите доступ «Просматривать могут все в Интернете, у кого есть ссылка». Ссылка на инструкцию Как предоставить доступ к файлам и папкам на Google Диске.
5. Скопируйте текст задания в свой документ.
6. Выполните домашнее задание.
7. Вставьте в соответствующие абзацы вашего документа ссылки на выполненные задания.
8. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
9. Любые вопросы по решению задач задавайте в чате учебной группы.

### Инструменты/ дополнительные материалы, которые пригодятся для выполнения задания

1. [Google.Диск](https://drive.google.com/drive/my-drive).
2. [Google.документы](https://www.google.ru/intl/ru/docs/about/).
3. [CODESYS V3](https://owen.ru/license-file?f=https://www.owen.ru/upl/PO/Codesys3/CODESYS_Repository_Archive_V3.5_SP4.zip).
4. [Дополнительные библиотеки](https://owen.ru/product/codesys_v3/documentation).
5. [Чистый образ Windows 10](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/).
6. [MasterOPC Universal Modbus Server](https://insat.ru/products/?category=1414)
7. [Lectus Modbus OPC/DDE Server](https://lectussoft.com/)
8. [ОВЕН OPC](https://owen.ru/product/new_opc_server/documentation_and_software).
9. [MasterSCADA](https://insat.ru/products/?category=1631).
10.[HMI-проект]().
11.[OWEN Logic](https://owen.ru/product/programmnoe_obespechenie_owen_logic).
12.[Техническое задание](https://docs.google.com/document/d/1dJduxjuhRJ2rzFq9EvDvrrSl1wI86IjM20YwIZ_r-qw/edit?usp=sharing).
13.[Шаблон для домашнего задания](https://docs.google.com/document/d/17NMApsPhhf4vsnDDtFg3SyEir1uqEVdPAWIn3KVicIk/edit?usp=sharing).

### Задание 1

Инженер-стажер, находящийся на испытательном сроке, получил задание подправить алгоритм вращения электродвигателя. После начала работы он случайно стер не тот программный блок, а после этого сохранил и загрузил проект в контроллер. Естественно, данная функция на производстве перестала работать.
Резервная копия исходного проекта была давно утеряна обслуживающим персоналом.

Вашей задачей, как инженера АСУ ТП будет разработать POU для управления вращением электродвигателя по следующим условиям:
1. Запуск и остановка по кнопкам "Старт" и "Стоп" на панели управления (только при выборе ручного режима).
2. Вращение должно запускаться только при наличии воды в емкости (защита от "сухого хода").
3. Вращение электродвигателя в автоматическом режиме запускается от ультразвукового датчика уровня.

Более подробную информацию о данном задании можно изучить в [техническом задании](https://docs.google.com/document/d/1dJduxjuhRJ2rzFq9EvDvrrSl1wI86IjM20YwIZ_r-qw/edit?usp=sharing).

Необходимо скачать [проект]() и написать в нем программный блок, вкотором будутреализованы необходимые функции, описанные в [техническом задании](), а также настроить связь между программой контроллера и HMI.

*Результатом выполнения данного задания будет следующий набор файлов*:
- программный блок, разработанный в среде CODESYS V3, содержащий в себе все требуемые для реализации функции.

### Задание 2

Разработать логику для программируемого реле в среде OWEN Logic. 
**Алгоритм работы:**
- программируемое реле принимает **6 входных сигналов:** кнопка открытия регулирующего клапана; кнопка закрытия регулирующего клапана; Н.О. контакт с пускателя электродвигателя регулирующего клапана; кнопка остановки открытия/закрытия регулирующего клапана; сигнал с датчика открытия регулирующего клапана; сигнал с датчика закрытия регулирующего клапана.
- программируемое реле выдает сигнал на пускатель для открытия при нажатии кнопки **"Открыть клапан"**, а сигнал для закрытия - при нажатии кнопки **"Закрыть клапан"**. Запуск двигателя регулирующего клапана регулируется с помощью реверсивного пускателя.
- при нажатии кнопки **"Остановить движение"** вращение двигателя немедленно прекращается независимо от текущего положения регулирующего клапана.
- при нажатии кнопки **"Открыть клапан"** вращение двигателя происходит до срабатывания датчика открытия клапана.
- при нажатии кнопки **"Закрыть клапан"** вращение двигателя происходит до срабатывания датчика закрытия клапана.
- Если после нажатия кнопки **"Открыть клапан"** в течение 10 секунд не появляется сигнал с датчика открытия, то появляется выходной сигнал **"Ошибка открытия клапана"**.
- Если после нажатия кнопки **"Закрыть клапан"** в течение 10 секунд не появляется сигнал с датчика закрытия, то появляется выходной сигнал **"Ошибка закрытия клапана"**.

*Результатом выполнения данного задания будет следующий набор файлов*:
- проект, разработанный всреде Owen Logic, работающий в соответствии с заданным алгоритмом. 

### Задание 3 *

После неудачного восстановления операционной системы с установленной на ней SCADA-системой все данные были утеряны. Но, по счастливой случайности, у системного администратора, обслуживающего сервер MasterSCADA, остался экспортированный образ чистой ОС.
Ваша задача - восстановить работоспособность связи SCADA-системы с ПО Codesys V3.
*Инструкция по восстановлению работоспособности и настройке связи между SCADA и PLC*:
1. Импортировать ОС Windows 10 на виртуальную машину для разворачивания SCADA.
2. Установить и/или настроить на виртуальной машине любой из выбранных вами OPC-серверов: 
- *CODESYS V3 OPC*;
- *MasterOPC Universal Modbus Server*;
- *Lectus Modbus OPC/DDE Server*;
- *ОВЕН OPC*.
3. Развернуть MasterSCADA на импортированной виртуальной машине.
4. Связать OPC-сервер с MasterSCADA.
5. Изменить из хостовой ОС попеременно значение переменных *EngineStart* (Запуск двигателя), *EngineStop* (Остановка двигателя) и *EngineVelocityTolerance*(Значение скорости двигателя). Значения должны измениться на OPC-сервере в MasterSCADA, установленной на гостевой ОС.

*Результатом выполнения данного задания будет следующий набор файлов*:
- архив формата .zip или .rar со следующими снимками экрана: 
1. скриншот SCADA-переменных до внесения изменений со стороны хоста;
2. скриншот SCADA-переменных после внесения изменений со стороны хоста. 

### Правила приема работы
1. Ссылка на документ (Google Doc) с выполненным заданием в личном кабинете.
2. Документ размещён на личном Google Disk.
3. К документу настроены права доступа «Просматривать могут все в Интернете, у кого есть ссылка.

### Критерии оценки
1. Зачёт - выполнены все задания, ответы даны в развернутой форме, в выполненных заданиях нет противоречий и нарушения логики.
2. На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки.
